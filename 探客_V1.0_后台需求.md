#### 数据结构
##### TUser

| 属性名 | 类型 | 意义 |
|--------|--------|--------|
|    id    |   String     |   唯一标识用户     |
|    phone    |   String     |   手机号码     |
|    token    |   String     |   用户密钥的加密形式     |
|    open_id    |   String     |   第三方登录用户的id     |
|    installtion_id    |   String     |   leancloud用来推送的依据，和设备有关     |
|    user_avatar    |   String     |   用户头像url     |
|    nick_name    |   String     |   用户昵称     |
|    weight    |   int     |   体重(kg)     |
|    height    |   int     |   身高(cm)     |
|    birthday    |   date     |   唯一标识用户     |
|    gender    |   int     |   用户性别     |
|    region    |   String     |   用户所在地区     |
|    experience    |   int     |   用户经验值    |

##### TGame

| 属性名 | 类型 | 意义 |
|--------|--------|--------|
| game_id| String | 唯一标识当前游戏|
| title| String | 游戏标题|
| cover| String | 游戏封面图片（url）|
| people_play| int| 喜欢该游戏的人数|
| is_team_game| int | 比赛是否为个人赛（0：个人，1：团队|
| recommend| int | 比赛的推荐状态(0：普通，1：推荐，2：new|
| state| int | （0：正常，1：内测，2：维护中，3：已结束|
| start_date| date | 开始日期|
| end_date| date | 结束日期|
| start_time| String | 开始时间|
| end_time| String | 结束时间|
| current_enrollment| int | 当前报名数量|
| limit_enrollment| int | 报名上限数|
| min_person_per_team| int | 每个队伍人数下限|
| max_person_per_team| int | 每个队伍人数上限|
| latitude| String | 游戏地点纬度|
| longtitude| String | 游戏地点经度|
| city| String | 游戏举办城市|
| location| String | 游戏举办区域，例："洪山区 洪山广场"|
| introduction| String | 游戏简介，可能是一段html或者md|
| rules| String | 游戏规则，可能是一段html或者md|
| enrollments| 未知 | 外联多个Team|
| gameManagers| 未知 | 给游戏指定特定的GameManager用户|
| betaUsers| 未知 | 给游戏指定特定的内测用户|
| lineSize| String | 游戏中包含的主题线路总数|
| lines| 未知 | 外联多条ThemeLine|

##### TThemeLine
| 属性名 | 类型 | 意义 |
|--------|--------|--------|
| theme_line_id| String | 唯一标识路线|
| points| 未知 | 攻击点的集合..|

##### TPoint
| 属性名 | 类型 | 意义 |
|--------|--------|--------|
| point_id| String | 唯一标识攻击点|
| point_index| int | 点在路线中的顺序|
| latitude| String | 纬度|
| longtitude| String | 经度|
| type| int | 0 ： 扫码任务，1 ： 定点任务，2 ： 谜底任务，3 ： 拍照识别任务|
| exp| int | 该点主任务的经验值|
| message| String |  0 : 完成GM所给的任务，并扫描GM出示的二维码即可通往下一关 1 : 请观察下面给出的线索，可能是文字与图片混排,线索暗示的地点离你不远，请向你认为可能的目的地移动，到达该地点系统会给出相应提示[http://leancloud.com/lpty/tank/sadflkjsadgl124125124.png] 2 : 一段文字，请根据文字描述，回答下面相关问题 3 : 一段文字，根据文字描述，启动相机拍摄可疑物品|
| pwd| String |  0 : 二维码中包含的string信息  1 : 目的地的坐标以及精确度 2 : 相关问题的答案 3 : 图像匹配的密钥|
| bonus_event_type| int | 0 ： 扫码任务，1 ： 定点任务，2 ： 谜底任务，3 ： 拍照识别任务|
| bonus_event_message| String |  0 : 完成GM所给的任务，并扫描GM出示的二维码即可通往下一关 1 : 请观察下面给出的线索，可能是文字与图片混排,线索暗示的地点离你不远，请向你认为可能的目的地移动，到达该地点系统会给出相应提示[http://leancloud.com/lpty/tank/sadflkjsadgl124125124.png] 2 : 一段文字，请根据文字描述，回答下面相关问题 3 : 一段文字，根据文字描述，启动相机拍摄可疑物品|
| bonus_event_pwd| String |  0 : 二维码中包含的string信息  1 : 目的地的坐标以及精确度 2 : 相关问题的答案 3 : 图像匹配的密钥|

打包下载游戏内容
> **tGame.id**.zip格式
> - asdgasdg134254124(tGame.id).zip
	- 1
        - 2（tPoint.point_index）（单个点文件夹
            - point.json （id,latLng,type,message(文件名),pwd(字符串或者文件名，根据type判定),exp）
            - message文件
            - pwd文件
            - bonus_event_message文件
            - bonus_event_pwd文件
        - ....
	- 2
	- 3

##### TTeam
| 属性名 | 类型 | 意义 |
|--------|--------|--------|
|   team_id     |   String     |   唯一标识团队     |
|   game_id     |   String     |   该团队属于哪个游戏     |
|   captain     |   String     |   该团队队长的id    |
|   line_index     |   int     |   团队分配的游戏路线     |
|   name     |   String     |   团队名称     |
|   is_started     |   String     |   团队是否已经开始游戏     |
|   is_finished     |   String     |   团队是否已经结束游戏     |
|   score     |   int     |   团队得到的分数     |
|   members     |   未知     |   外链TUser，该团队的成员     |

##### TCity

| 属性名 | 类型 | 意义 |
|--------|--------|--------|
|   level     |   String     |   城市等级     |
|   initial     |   String     |   简写，"wh"     |
|   name     |   String     |   “武汉市”     |
|   province     |   String     |   “湖北”     |
|   cy     |   String     |   城市经度     |
|   cx     |   String     |   城市纬度     |
|   code     |   String     |   城市代号     |
|   pinyin     |   String     |   城市拼音     |


##### TRecord
| 属性名 | 类型 | 意义 |
|--------|--------|--------|
|   record_id     |   String     |   唯一标识     |
|   index     |   int     |   标明记录索引     |
|   team_id     |   String     |   团队id     |
|   time     |   String     |   记录时间     |
|   x     |   String     |   记录x坐标     |
|   y     |   String    |   记录y坐标    |
|   type     |   int     |   记录种类    |
|   message     |   String     |   备注    |


##### 奖励 (TPrize
| 属性名 | 类型 | 意义 |
|--------|--------|--------|
|   prize_id     |   String     |   唯一标识     |
|   user_id     |   String     |   所属用户     |
|   title     |   String     |   。     |
|   time     |   String     |   。     |
|   content     |   String     |   。     |

#### 接口

是否需要统一返回格式
```
{
	code : 1101,
    msg : "登录成功",
    data : {
    	id : "asdgasdg34553y3",
        ...
    }
}
```
根据城市来筛选游戏列表，用城市编码比城市名称好检索点
用户在首页中点击已经完成的游戏和未完成的游戏,跳转流程不明确
对于团队成员变动情况的推送通知，服务器?客户端来做
日志记录是否和攻击点绑定
游戏数据中每个任务完成情况不好统计
裁判任务展示界面逻辑可能需要调整，先展示游戏列表，点进去再展示点的列表

1. 手机号登录接口
> 发送：手机号、密码
> 返回：
> - 成功
> 	user_id
> - 失败
> 	登录失败

2. 第三方登录接口
> 发送：open_id
> 返回：需要返回该用户是新用户还是老用户
> - 新用户
> 	创建用户，返回user_id
> - 老用户
> 	返回user_id

3. 获取验证码接口
> 发送：手机号
> 返回：无

4. 注册接口
> 发送：手机号、验证码、密码
> 返回：
> - 成功
> 	注册成功，返回user_id
> - 失败
> 	注册失败，”用户已注册“

5. 重置密码接口
> 发送：手机号、验证码、新密码
> 返回：无

6. 获取用户协议接口
> 发送：空
> 返回：
> - 成功
> 	返回用户协议内容
> - 失败
>	获取信息失败

7. 完善用户信息接口
> 发送：user_avatar、nick_name、phone、birthday、gender、height、weight、region
> 返回：无

8. 绑定手机号接口
> 发送：user_id、手机号、验证码
> 返回：无

9. 获取开通城市列表
> 发送：空
> 返回：城市列表
>  {
        "level": "11",
        "initial": "wh",
        "name": "武汉市",
        "province": "湖北",
        "adcode": "420100",
        "cy": "110270600",
        "cx": "219430744",
        "code": "027",
        "pinyin": "WuHan"
      },{...},....

10. 获取主页游戏列表
> 列表返回的时候，需要排序（排序规则需要商讨）
> 发送：city
> 返回：游戏列表
> [
> {
>	game_id : "asdgasdgha63463346",
>	title : "森林公园",
>	cover : "http://233.233.233.2/files/asdga9sh7gasdfh.jpg",
>	is_team_game : 1,
>	recommend : 1,
>	state : 0,
>	start_date : "1990-01-01",
>	end_date : "1990-01-02",
>	end_time : "19:40",
>	end_time : "21:40",
>	city : "武汉市",
>	location : "洪山区 洪山广场"
> },
> {},{}....
> ]

11. 加入团队接口
> 需要检测
> 1. 团队是否存在
> 2. 团队是否已经开始游戏
> 3. 人数是否达到上限
> 发送：team_id、captain_id、user_id
> 返回：无

12. 查询用户游戏状态接口
> 发送：game_id、user_id
> 返回：所在team的状态(是否开始玩，是否完成)

13. 查询游戏详细信息接口
> 发送：game_id
> 返回：部分游戏信息
> {
>	game_id : "asdgasdgha63463346",
>	title : "森林公园",
>	cover : "http://233.233.233.2/files/asdga9sh7gasdfh.jpg",
>	peoplePlay : 666,
>	is_team_game : 1,
>	recommend : 1,
>	state : 0,
>	start_date : "1990-01-01",
>	end_date : "1990-01-02",
>	end_time : "19:40",
>	end_time : "21:40",
>	current_enrollment : 99,
>	limit_enrollment : 200,
>	min_person_per_team : 3,
>	max_person_per_team : 5,
>	latitude : "34.23523426",
>	longtigude ； “114.12423512”，
>	city : "武汉市",
>	location : "洪山区 洪山广场"
>	introduction : "html代码",
>	rules : "html代码"
> }

14. 获取游戏详情分享页面url接口
> 发送：game_id
> 返回：游戏对应宣传url

15. 游戏打包下载接口
> 将游戏各种资源按照固定格式打包，提供下载服务
> 发送：game_id
> 返回：game_id.zip文件包

16. 创建队伍接口
> 需要检测团队名称是否重复、团队是否已满
> 发送：user_id、game_id、团队名称
> 返回：team_id

17. 获取团队信息接口
> 发送：team_id
> 返回：部分团队信息
> {
>	captain : "adfghsdhes34y45y4",
>	line_index : 1,
>	name : "23333",
>	is_started : false,
>	is_finished : false,
>	members : [
>		{
> 		user_id : "asghadshas224",
> 		user_avatar : "http://233.233.233.2/files/23463463hiu346.jpg",
> 		experience : 1300,
> 		},{}...
> 	]
> }

18. 移除队员接口
> 发送：captain_id(队长id)、user_id(被移除用户id)、队伍id
> 返回：无

19. 退出团队接口
> 发送：user_id、team_id
> 返回：无

20. 解散团队接口
> 发送：captain_id(队长id)、team_id
> 返回：无

21. 上传团队游戏过程中特殊事件接口
> 发送：
> {
>	record_id : "sdfadsgasdgsd34634",
>	index : 1,
>	team_id : "2346236g345t3",
>	time ； “145349769386”，
>	x : "24.234525253",
>	y : "114.25262523",
>	type : 1,
>	message : "完成第一个攻击点的任务"
> }
> 返回：无

22. 查询游戏实时数据接口
> 发送：game_id、team_id
> 返回：游戏记录
> {
>		finish_team_num : 5,
>		records : [
>		{
>			record_id : "sdfadsgasdgsd34634",
>			index : 1,
>			team_id : "2346236g345t3",
>			time ； “145349769386”，
>			x : "24.234525253",
>			y : "114.25262523",
>			type : 1,
>			message : "完成第一个攻击点的任务"
> 		},{},....
> 	]
> }

23. 游戏结束后分享接口
> 发送：team_id、game_id
> 返回：构造一个前端网页，返回其url

24. 个人信息查询接口
> 发送：user_id
> 返回：用户信息
> {
> user_id
> phone
> installtion_id
> user_avatar
> nick_name
> weight
> height
> gender
> region
> experience
> }

25. 查询用户未完成的游戏
> 通过user_id来查询用户已经报名的游戏列表，需要包含游戏的部分数据信息
> 发送：user_id
> 返回：部分游戏数据
> id
> title
> cover
> is_team_game
> start_date
> end_date
> start_time
> end_time

26. 查询用户所在团队的信息
> 通过user_id、game_id来查寻团队的信息，需要返回部分团队信息
> team_id
> game_id
> members(TUser)
> - user_id
> - user_avatar

27. 查询用户已完成的游戏
> 通过user_id查询用户已经完成的游戏列表，返回部分游戏信息
> 发送：user_id
> 返回：部分游戏数据
> id （leancloud 自动生成
> title （游戏的标题
> cover （link AVFile，游戏的宣传图片
> is_team_game （0：个人，1：团队 int
> recommend (0：普通，1：推荐，2：new int
> state（0：正常，1：内测，2：维护中，3：已结束 int
> start_date （限定开始日期
> end_date （限定结束日期
> start_time （限定开始小时
> end_time （限定结束小时
> city （游戏举办的城市
> location （举办地点，例如：“洪山区 洪山广场”

28. 查询用户获得的奖励
> 发送：user_id
> 返回：奖励列表

29. 裁判任务接口
> 发送: user_id
> 返回：负责的游戏中的点

30. 关于接口
> 发送：无
> 返回：一个关于产品介绍的网页url

31. 绑定设备的installionId接口
> 发送：installation_id、user_id
> 返回：无